import{a as de,b as me,c as pe,d as _e,e as Ce,f as fe,g as ge,h as xe,j as ze,k as ve}from"./chunk-2P3GNEH3.js";import{e as se,f as ue,h as le,j as ce,n as O,o as F,p as N,q as A,r as k,t as I}from"./chunk-HTONI4Z4.js";import"./chunk-WP3L7HRK.js";import{ia as S,ja as V,s as ae}from"./chunk-2JD4PLYW.js";import"./chunk-NNDWFWTM.js";import"./chunk-GWGWIYPE.js";import{a as B,d as E}from"./chunk-PVJTXBPB.js";import{q as re}from"./chunk-FJ46DFFX.js";import{$a as r,Ac as C,Cc as Z,Fc as P,Gc as ee,Hc as te,Ib as m,Ic as ne,Kb as p,Mc as Q,Nb as b,Ob as w,Pb as _,Qb as a,Qc as ie,Rb as s,Rc as oe,Sb as d,Zb as z,dc as x,fa as y,fc as u,ka as f,la as g,nc as K,oc as J,pb as T,pc as X,sb as M,uc as c,vb as W,vc as Y,wa as j,wc as v,yc as h,za as G,zc as q}from"./chunk-2F6CAD3H.js";var D=class t{transform(n){return n==null?!0:Array.isArray(n)?n.length===0:!1}static \u0275fac=function(e){return new(e||t)};static \u0275pipe=M({name:"isDisabled",type:t,pure:!0})};var he=(t,n)=>n.id;function Pe(t,n){t&1&&d(0,"nz-empty")}function Qe(t,n){t&1&&d(0,"nz-icon",9)}function Ee(t,n){t&1&&d(0,"nz-icon",10)}function Se(t,n){if(t&1&&(a(0,"label",8),c(1),m(2,Qe,1,0,"nz-icon",9),m(3,Ee,1,0,"nz-icon",10),s()),t&2){let e=n.$implicit,i=u(4);_("nzValue",e.id),r(),v(" ",e.value," "),r(),p(i.isAnswerVisible()&&e.isCorrect?2:-1),r(),p(i.isAnswerVisible()&&!e.isCorrect?3:-1)}}function Ve(t,n){if(t&1&&(a(0,"nz-checkbox-group",7),b(1,Se,4,4,"label",8,he),s()),t&2){let e=u(3),i=C(0);_("formControl",e.questionFormControl),r(),w(i.answers)}}function Oe(t,n){t&1&&d(0,"nz-icon",9)}function Fe(t,n){t&1&&d(0,"nz-icon",10)}function Ne(t,n){if(t&1&&(a(0,"label",11),c(1),m(2,Oe,1,0,"nz-icon",9),m(3,Fe,1,0,"nz-icon",10),s()),t&2){let e=n.$implicit,i=u(4);_("nzValue",e.id),r(),v(" ",e.value," "),r(),p(i.isAnswerVisible()&&e.isCorrect?2:-1),r(),p(i.isAnswerVisible()&&!e.isCorrect?3:-1)}}function Ae(t,n){if(t&1&&(a(0,"nz-radio-group",7),b(1,Ne,4,4,"label",11,he),s()),t&2){let e=u(3),i=C(0);_("formControl",e.questionFormControl),r(),w(i.answers)}}function ke(t,n){if(t&1&&(a(0,"div",5),c(1),s(),d(2,"nz-divider",6),m(3,Ve,3,1,"nz-checkbox-group",7)(4,Ae,3,1,"nz-radio-group",7)),t&2){u(2);let e=C(0);r(),Y(e.question),r(2),p(e.isMultiple?3:4)}}function Ie(t,n){if(t&1){let e=z();a(0,"button",12),x("click",function(){f(e);let o=u(2);return g(o.changeAnswerVisibility())}),d(1,"nz-icon",13),c(2," \u0421\u043A\u0440\u044B\u0442\u044C \u043E\u0442\u0432\u0435\u0442\u044B "),s()}}function De(t,n){if(t&1){let e=z();a(0,"button",12),x("click",function(){f(e);let o=u(2);return g(o.changeAnswerVisibility())}),d(1,"nz-icon",14),c(2," \u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u043E\u0442\u0432\u0435\u0442\u044B "),s()}}function Le(t,n){if(t&1){let e=z();a(0,"div",0),m(1,Pe,1,0,"nz-empty")(2,ke,5,2),s(),a(3,"div",1),h(4),P(5,"isDisabled"),a(6,"button",2),x("click",function(){f(e);let o=u();return g(o.clearAnswers())}),d(7,"nz-icon",3),c(8," \u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u043E\u0442\u0432\u0435\u0442\u044B "),s(),m(9,Ie,3,0,"button",4)(10,De,3,0,"button",4),s()}if(t&2){let e=u(),i=C(0);r(),p(i.question.length===0?1:2);let o=ee(5,3,e.questionFormControl.value);r(5),_("disabled",o),r(3),p(e.isAnswerVisible()?9:10)}}var L=class t{storeService=y(E);questionId=ie.required();selectedTestOption=this.storeService.selectedTest;testQuestions=this.storeService.testQuestions;userAnswers=this.storeService.testResults;isAnswerVisible=j(!1);question=Q(()=>{let n=this.questionId();return(this.testQuestions()??[]).find(o=>o.id===n)??null});questionFormControl=new ue(null);constructor(){G(()=>{let n=this.question();n!==null&&this.addInitFormControlValue(n),this.isAnswerVisible.set(!1)}),this.questionFormControl.valueChanges.pipe(ae()).subscribe(()=>{this.addAnswerToStore()})}changeAnswerVisibility(){this.isAnswerVisible.set(!this.isAnswerVisible())}clearAnswers(){this.questionFormControl.setValue(null)}addInitFormControlValue(n){let e=this.userAnswers().get(n.id)??null;if(e===null)this.questionFormControl.setValue(null);else{let i=e.answers;i.length===0?this.questionFormControl.setValue(null):this.questionFormControl.setValue(n.isMultiple?i:i[0])}}addAnswerToStore(){let n=this.questionFormControl.getRawValue()??[],e=Array.isArray(n)?n:[n],i=this.question();if(i!==null){let o={userAnswers:i.answers.map(l=>({id:l.id,isCorrect:l.isCorrect,isUserChoiceCorrect:e.includes(l.id)})),answers:e};this.storeService.setTestResult(i.id,o)}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=T({type:t,selectors:[["app-question"]],inputs:{questionId:[1,"questionId"]},decls:2,vars:2,consts:[[1,"question"],[1,"actions"],["nz-button","","nzType","primary","type","button",3,"click","disabled"],["nzType","clear","nzTheme","outline"],["nz-button","","nzType","primary","type","button"],[1,"question-title"],[1,"question-divider"],[1,"question-answers",3,"formControl"],["nz-checkbox","",1,"question-answers-answer",3,"nzValue"],["nzType","check","nzTheme","outline",1,"question-answers-answer-correct"],["nzType","close","nzTheme","outline",1,"question-answers-answer-incorrect"],["nz-radio","",1,"question-answers-answer",3,"nzValue"],["nz-button","","nzType","primary","type","button",3,"click"],["nzType","eye-invisible","nzTheme","outline"],["nzType","eye","nzTheme","outline"]],template:function(e,i){if(e&1&&(h(0),m(1,Le,11,5)),e&2){let o=q(i.question());r(),p(o?1:-1)}},dependencies:[Ce,_e,I,k,A,N,O,F,V,S,ce,se,le,xe,ge,fe,pe,de,me,D],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:1rem}.question[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:.75rem 1.25rem;border:1px solid transparent;border-radius:.25rem;box-sizing:border-box;background-color:#e9f6f8;border-color:#bee5eb}.question-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.5rem;line-height:1.5rem}.question-divider[_ngcontent-%COMP%]{margin:0}.question-answers[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.question-answers-answer[_ngcontent-%COMP%]{font-size:1.25rem}.question-answers-answer-correct[_ngcontent-%COMP%]{color:#28a745;margin-left:.5rem}.question-answers-answer-incorrect[_ngcontent-%COMP%]{color:#ff5a5f;margin-left:.5rem}.actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:1rem}@media screen and (max-width:700px){.question[_ngcontent-%COMP%]{gap:.5rem}.question-title[_ngcontent-%COMP%], .question-answers-answer[_ngcontent-%COMP%]{font-size:1rem;line-height:1rem}}"],changeDetection:0})};var R=class t{transform(n,e){return e.has(n)?e.get(n).answers.length>0:!1}static \u0275fac=function(e){return new(e||t)};static \u0275pipe=M({name:"isHaveAnswer",type:t,pure:!1})};var Re=["quizContainer"],Be=()=>[],$e=(t,n)=>n.id;function He(t,n){if(t&1&&(a(0,"h2",14),c(1),s(),d(2,"app-question",15)),t&2){u();let e=C(7);r(),v("\u0412\u043E\u043F\u0440\u043E\u0441 \u2116",e.index+1),r(),_("questionId",e.id)}}function Ue(t,n){t&1&&d(0,"div",17)}function je(t,n){if(t&1){let e=z();h(0),P(1,"isHaveAnswer"),a(2,"button",16),x("click",function(){let o=f(e).$implicit,l=u(2);return g(l.changeCurrentQuestionIndex(o.index))}),c(3),m(4,Ue,1,0,"div",17),s()}if(t&2){let e=n.$implicit;u();let i=C(7),o=e.id===(i==null?null:i.id),l=o?!1:te(1,4,e.id,u().userAnswers());r(2),_("nzType",o?"primary":"default")("disabled",o),r(),v(" ",e.index+1," "),r(),p(l?4:-1)}}function Ge(t,n){if(t&1){let e=z();a(0,"h1",2),c(1),s(),a(2,"h2",3),c(3),s(),a(4,"div",4,0),h(6)(7),a(8,"div",5)(9,"div",6),m(10,He,3,2),s(),a(11,"div",7)(12,"button",8),x("click",function(){f(e);let o=C(6),l=u();return g(l.changeCurrentQuestionIndex(o-1))}),d(13,"nz-icon",9),c(14," \u041F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0438\u0439 \u0432\u043E\u043F\u0440\u043E\u0441 "),s(),a(15,"button",8),x("click",function(){f(e);let o=C(6),l=u();return g(l.changeCurrentQuestionIndex(o+1))}),c(16," \u0421\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439 \u0432\u043E\u043F\u0440\u043E\u0441 "),d(17,"nz-icon",10),s()(),a(18,"button",8),x("click",function(){f(e);let o=u(),l=C(1);return g(o.completeQuiz(l))}),c(19," \u0421\u0434\u0430\u0442\u044C \u0442\u0435\u0441\u0442 "),s()(),a(20,"div",11)(21,"h3"),c(22,"\u041D\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u044F \u043F\u043E \u0442\u0435\u0441\u0442\u0443"),s(),a(23,"div",12),b(24,je,5,7,"button",13,$e),s()()()}if(t&2){let e=u(),i=C(0),o=C(1);r(),v("\u0422\u0435\u0441\u0442: ",i==null?null:i.label),r(2),v("\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0432\u043E\u043F\u0440\u043E\u0441\u043E\u0432: ",o.length),r(3);let l=q(e.currentQuestionIndex());r();let U=q(e.question());r(3),p(U?10:-1),r(2),_("disabled",l===o[0].index),r(3),_("disabled",l===o[o.length-1].index),r(3),_("disabled",!U),r(6),w(o)}}function We(t,n){if(t&1){let e=z();a(0,"button",19),x("click",function(){f(e);let o=u(2);return g(o.goToMain())}),c(1,"\u041D\u0430 \u0433\u043B\u0430\u0432\u043D\u0443\u044E"),s()}}function Ke(t,n){if(t&1&&(d(0,"nz-empty",18),W(1,We,2,0,"ng-template",null,1,ne)),t&2){let e=X(2);_("nzNotFoundFooter",e)}}var H=class t{storeService=y(E);router=y(re);nzModalService=y(ze);selectedTestOption=this.storeService.selectedTest;testQuestions=this.storeService.testQuestions;userAnswers=this.storeService.testResults;currentQuestionIndex=this.storeService.currentQuestionIndex;quizContainerElement=oe("quizContainer");question=Q(()=>(this.testQuestions()??[]).find(i=>i.index===this.currentQuestionIndex())??null);changeCurrentQuestionIndex(n){this.storeService.setCurrentQuestionIndex(n),this.scroll()}completeQuiz(n){let e=[];for(let[i,o]of this.userAnswers())o.answers.length>0&&e.push(i);this.nzModalService.confirm({nzTitle:"\u0412\u044B \u0445\u043E\u0442\u0438\u0442\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C \u0442\u0435\u0441\u0442?",nzContent:`\u0412\u044B \u043E\u0442\u0432\u0435\u0442\u0438\u043B\u0438 \u043D\u0430 ${e.length} \u0438\u0437 ${n.length} \u0432\u043E\u043F\u0440\u043E\u0441\u043E\u0432`,nzCancelText:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C",nzOkText:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C \u0442\u0435\u0441\u0442",nzMaskClosable:!0,nzOnOk:()=>{this.router.navigateByUrl(`/${B.result}`)}})}goToMain(){this.router.navigateByUrl(`/${B.start}`)}scroll(){let n=this.quizContainerElement()??null;n!==null&&n.nativeElement.scrollTo({top:0,left:0,behavior:"smooth"})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=T({type:t,selectors:[["app-quiz-page"]],viewQuery:function(e,i){e&1&&K(i.quizContainerElement,Re,5),e&2&&J()},decls:4,vars:4,consts:[["quizContainer",""],["footerTpl",""],[1,"quiz-title"],[1,"quiz-subtitle"],[1,"quiz-container"],[1,"quiz-container-left"],[1,"quiz-question"],[1,"quiz-navigation"],["nz-button","","nzType","primary","type","button",3,"click","disabled"],["nzType","left"],["nzType","right"],[1,"quiz-container-right"],[1,"quiz-fast-navigation"],["nz-button","","type","button",1,"quiz-fast-navigation-question",3,"nzType","disabled"],[1,"quiz-question-title"],[3,"questionId"],["nz-button","","type","button",1,"quiz-fast-navigation-question",3,"click","nzType","disabled"],[1,"quiz-fast-navigation-question-badge"],[1,"quiz-empty",3,"nzNotFoundFooter"],["nz-button","","nzType","primary","type","button",3,"click"]],template:function(e,i){if(e&1&&(h(0)(1),m(2,Ge,26,8)(3,Ke,3,1)),e&2){let o=q(i.selectedTestOption());r();let l=q(i.testQuestions()??Z(3,Be));r(),p(o&&l.length>0?2:3)}},dependencies:[A,N,O,F,I,k,V,S,ve,L,R],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:0;height:100%;width:100%}.quiz-title[_ngcontent-%COMP%]{line-height:2rem}.quiz-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:2rem;height:0;flex:1;overflow-y:auto}.quiz-container-left[_ngcontent-%COMP%], .quiz-container-right[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0}.quiz-container-left[_ngcontent-%COMP%]{flex:1;gap:1rem}.quiz-container-left[_ngcontent-%COMP%]   .quiz-navigation[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:1rem}.quiz-container-right[_ngcontent-%COMP%]{--fast-navigation-columns: 7;--fast-navigation-column-width: 35px;overflow-y:auto;width:calc(var(--fast-navigation-columns) * var(--fast-navigation-column-width) + (var(--fast-navigation-columns) - 1) * .5rem + 18.68px)}.quiz-container-right[_ngcontent-%COMP%]   .quiz-fast-navigation[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(var(--fast-navigation-column-width),1fr));gap:.5rem;width:100%}.quiz-container-right[_ngcontent-%COMP%]   .quiz-fast-navigation-question[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;width:var(--fast-navigation-column-width);align-items:center;justify-content:center;position:relative}.quiz-container-right[_ngcontent-%COMP%]   .quiz-fast-navigation-question-badge[_ngcontent-%COMP%]{height:10px;width:10px;position:absolute;z-index:2;top:-5px;right:-5px;background-color:#87d068;border-radius:100%}.quiz-empty[_ngcontent-%COMP%]{margin:auto}@media screen and (max-width:1200px){.quiz-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.quiz-container-left[_ngcontent-%COMP%]{flex:none}.quiz-container-right[_ngcontent-%COMP%]{width:100%;min-height:fit-content}}@media screen and (max-width:700px){.quiz-title[_ngcontent-%COMP%], .quiz-subtitle[_ngcontent-%COMP%], .quiz-question-title[_ngcontent-%COMP%]{line-height:1.5rem;margin-bottom:8px}.quiz-title[_ngcontent-%COMP%]{font-size:1.5rem}}@media screen and (max-width:500px){.quiz-navigation[_ngcontent-%COMP%]   .ant-btn[_ngcontent-%COMP%]  span{display:none}.quiz-navigation[_ngcontent-%COMP%]   .ant-btn[_ngcontent-%COMP%]  .anticon{margin:0}}"],changeDetection:0})};export{H as default};
