import{a as pe,b as _e,c as Ce,d as fe,e as xe,f as ge,g as ze,h as ve,j as be,k as ye}from"./chunk-2P3GNEH3.js";import{a as V}from"./chunk-UBDRAZZ5.js";import{e as ue,f as ce,h as de,j as me,n as A,o as I,p as O,q as F,r as D,t as B}from"./chunk-HTONI4Z4.js";import"./chunk-WP3L7HRK.js";import{ia as L,ja as N,s as le}from"./chunk-2JD4PLYW.js";import"./chunk-NNDWFWTM.js";import"./chunk-GWGWIYPE.js";import{a as U,c as k,d as T,f as E}from"./chunk-2IXFF5BO.js";import{q as se}from"./chunk-FJ46DFFX.js";import{$a as a,Ac as l,Fc as S,Gc as ne,Hc as ie,Ib as p,Ic as oe,Kb as _,Mc as P,Nb as q,Ob as w,Pb as m,Qb as s,Qc as re,Rb as u,Rc as ae,Sb as d,Zb as z,dc as g,fa as b,fc as r,ka as f,la as x,nc as Y,oc as Z,pb as Q,pc as ee,sb as M,uc as C,vb as X,vc as te,wa as K,wc as y,yc as h,za as J,zc as v}from"./chunk-2F6CAD3H.js";var R=class t{transform(n){return k(n)?!0:Array.isArray(n)?n.length===0:!1}static \u0275fac=function(e){return new(e||t)};static \u0275pipe=M({name:"isDisabled",type:t,pure:!0})};var he=(t,n)=>n.id;function Pe(t,n){t&1&&d(0,"nz-empty")}function Ve(t,n){t&1&&d(0,"nz-icon",7)}function ke(t,n){t&1&&d(0,"nz-icon",8)}function Ee(t,n){if(t&1&&(s(0,"label",6),C(1),p(2,Ve,1,0,"nz-icon",7),p(3,ke,1,0,"nz-icon",8),u()),t&2){let e=n.$implicit,i=r(4);m("nzValue",e.id),a(),y(" ",e.value," "),a(),_(i.isAnswerVisible()&&e.isCorrect?2:-1),a(),_(i.isAnswerVisible()&&!e.isCorrect?3:-1)}}function Le(t,n){if(t&1&&(s(0,"nz-checkbox-group",5),q(1,Ee,4,4,"label",6,he),u()),t&2){let e=r(3),i=l(0);m("formControl",e.questionFormControl),a(),w(i.answers)}}function Ne(t,n){t&1&&d(0,"nz-icon",7)}function Ae(t,n){t&1&&d(0,"nz-icon",8)}function Ie(t,n){if(t&1&&(s(0,"label",9),C(1),p(2,Ne,1,0,"nz-icon",7),p(3,Ae,1,0,"nz-icon",8),u()),t&2){let e=n.$implicit,i=r(4);m("nzValue",e.id),a(),y(" ",e.value," "),a(),_(i.isAnswerVisible()&&e.isCorrect?2:-1),a(),_(i.isAnswerVisible()&&!e.isCorrect?3:-1)}}function Oe(t,n){if(t&1&&(s(0,"nz-radio-group",5),q(1,Ie,4,4,"label",9,he),u()),t&2){let e=r(3),i=l(0);m("formControl",e.questionFormControl),a(),w(i.answers)}}function Fe(t,n){if(t&1&&(s(0,"div",3),C(1),u(),d(2,"nz-divider",4),p(3,Le,3,1,"nz-checkbox-group",5)(4,Oe,3,1,"nz-radio-group",5)),t&2){r(2);let e=l(0);a(),te(e.question),a(2),_(e.isMultiple?3:4)}}function De(t,n){if(t&1){let e=z();s(0,"button",10),g("click",function(){f(e);let o=r(2);return x(o.clearAnswers())}),d(1,"nz-icon",11),u()}if(t&2){r();let e=l(4),i=l(6);m("nzBlock",i)("disabled",e)}}function Be(t,n){if(t&1){let e=z();s(0,"button",10),g("click",function(){f(e);let o=r(2);return x(o.clearAnswers())}),d(1,"nz-icon",11),C(2," \u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u043E\u0442\u0432\u0435\u0442\u044B "),u()}if(t&2){r();let e=l(4),i=l(6);m("nzBlock",i)("disabled",e)}}function Re(t,n){if(t&1){let e=z();s(0,"button",13),g("click",function(){f(e);let o=r(3);return x(o.changeAnswerVisibility())}),d(1,"nz-icon",14),u()}if(t&2){r(2);let e=l(6);m("nzBlock",e)}}function $e(t,n){if(t&1){let e=z();s(0,"button",13),g("click",function(){f(e);let o=r(3);return x(o.changeAnswerVisibility())}),d(1,"nz-icon",14),C(2," \u0421\u043A\u0440\u044B\u0442\u044C \u043E\u0442\u0432\u0435\u0442\u044B "),u()}if(t&2){r(2);let e=l(6);m("nzBlock",e)}}function He(t,n){if(t&1&&p(0,Re,2,1,"button",12)(1,$e,3,1,"button",12),t&2){r();let e=l(7);_(e?0:1)}}function Ue(t,n){if(t&1){let e=z();s(0,"button",13),g("click",function(){f(e);let o=r(3);return x(o.changeAnswerVisibility())}),d(1,"nz-icon",15),u()}if(t&2){r(2);let e=l(6);m("nzBlock",e)}}function je(t,n){if(t&1){let e=z();s(0,"button",13),g("click",function(){f(e);let o=r(3);return x(o.changeAnswerVisibility())}),d(1,"nz-icon",15),C(2," \u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u043E\u0442\u0432\u0435\u0442\u044B "),u()}if(t&2){r(2);let e=l(6);m("nzBlock",e)}}function Ge(t,n){if(t&1&&p(0,Ue,2,1,"button",12)(1,je,3,1,"button",12),t&2){r();let e=l(7);_(e?0:1)}}function We(t,n){if(t&1&&(s(0,"div",0),p(1,Pe,1,0,"nz-empty")(2,Fe,5,2),u(),s(3,"div",1),h(4),S(5,"isDisabled"),h(6)(7),p(8,De,2,2,"button",2)(9,Be,3,2,"button",2),p(10,He,2,1)(11,Ge,2,1),u()),t&2){let e=r(),i=l(0);a(),_(i.question.length===0?1:2),a(3),v(ne(5,3,e.questionFormControl.value)),a(2),v(e.isTablet()),a();let o=v(e.isMobile());a(),_(o?8:9),a(2),_(e.isAnswerVisible()?10:11)}}var $=class t{storeService=b(E);adaptiveService=b(V);questionId=re.required();selectedTestOption=this.storeService.selectedTest;testQuestions=this.storeService.testQuestions;userAnswers=this.storeService.testResults;isTablet=this.adaptiveService.isTablet;isMobile=this.adaptiveService.isMobile;isAnswerVisible=K(!1);question=P(()=>{let n=this.questionId();return this.testQuestions().find(o=>o.id===n)??null});questionFormControl=new ce(null);constructor(){J(()=>{let n=this.question();T(n)&&this.addInitFormControlValue(n),this.isAnswerVisible.set(!1)}),this.questionFormControl.valueChanges.pipe(le()).subscribe(()=>{this.addAnswerToStore()})}changeAnswerVisibility(){this.isAnswerVisible.set(!this.isAnswerVisible())}clearAnswers(){this.questionFormControl.setValue(null)}addInitFormControlValue(n){let e=this.userAnswers().get(n.id)??null;if(k(e))this.questionFormControl.setValue(null);else{let i=e.answers;i.length===0?this.questionFormControl.setValue(null):this.questionFormControl.setValue(n.isMultiple?i:i[0])}}addAnswerToStore(){let n=this.questionFormControl.getRawValue()??[],e=Array.isArray(n)?n:[n],i=this.question();if(T(i)){let o={userAnswers:i.answers.map(c=>({id:c.id,isCorrect:c.isCorrect,isUserChoiceCorrect:e.includes(c.id)})),answers:e};this.storeService.setTestResult(i.id,o)}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Q({type:t,selectors:[["app-question"]],inputs:{questionId:[1,"questionId"]},decls:2,vars:2,consts:[[1,"question"],[1,"actions"],["nz-button","","nzType","primary","type","button",3,"nzBlock","disabled"],[1,"question-title"],[1,"question-divider"],[1,"question-answers",3,"formControl"],["nz-checkbox","",1,"question-answers-answer",3,"nzValue"],["nzType","check","nzTheme","outline",1,"question-answers-answer-correct"],["nzType","close","nzTheme","outline",1,"question-answers-answer-incorrect"],["nz-radio","",1,"question-answers-answer",3,"nzValue"],["nz-button","","nzType","primary","type","button",3,"click","nzBlock","disabled"],["nzType","clear","nzTheme","outline"],["nz-button","","nzType","primary","type","button",3,"nzBlock"],["nz-button","","nzType","primary","type","button",3,"click","nzBlock"],["nzType","eye-invisible","nzTheme","outline"],["nzType","eye","nzTheme","outline"]],template:function(e,i){if(e&1&&(h(0),p(1,We,12,8)),e&2){let o=v(i.question());a(),_(o?1:-1)}},dependencies:[xe,fe,B,D,F,O,A,I,N,L,me,ue,de,ve,ze,ge,Ce,pe,_e,R],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:1rem}.question[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:.75rem 1.25rem;border:1px solid transparent;border-radius:.25rem;box-sizing:border-box;background-color:#e9f6f8;border-color:#bee5eb}.question-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.5rem;line-height:1.5rem}.question-divider[_ngcontent-%COMP%]{margin:0}.question-answers[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.question-answers-answer[_ngcontent-%COMP%]{font-size:1.25rem}.question-answers-answer-correct[_ngcontent-%COMP%]{color:#28a745;margin-left:.5rem}.question-answers-answer-incorrect[_ngcontent-%COMP%]{color:#ff5a5f;margin-left:.5rem}.actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:1rem}@media screen and (max-width:700px){.question[_ngcontent-%COMP%]{gap:.5rem}.question-title[_ngcontent-%COMP%], .question-answers-answer[_ngcontent-%COMP%]{font-size:1rem;line-height:1rem}}"],changeDetection:0})};var H=class t{transform(n,e){return e.has(n)?e.get(n).answers.length>0:!1}static \u0275fac=function(e){return new(e||t)};static \u0275pipe=M({name:"isHaveAnswer",type:t,pure:!1})};var Ke=["quizContainer"],Je=(t,n)=>n.id;function Xe(t,n){if(t&1&&(s(0,"h2",12),C(1),u(),d(2,"app-question",13)),t&2){r();let e=l(7);a(),y("\u0412\u043E\u043F\u0440\u043E\u0441 \u2116",e.index+1),a(),m("questionId",e.id)}}function Ye(t,n){if(t&1){let e=z();s(0,"button",8),g("click",function(){f(e),r();let o=l(6),c=r();return x(c.changeCurrentQuestionIndex(o-1))}),d(1,"nz-icon",14),u(),s(2,"button",8),g("click",function(){f(e),r();let o=l(6),c=r();return x(c.changeCurrentQuestionIndex(o+1))}),d(3,"nz-icon",15),u()}if(t&2){r();let e=l(6);r();let i=l(1);m("nzBlock",!0)("disabled",e===i[0].index),a(2),m("nzBlock",!0)("disabled",e===i[i.length-1].index)}}function Ze(t,n){if(t&1){let e=z();s(0,"button",16),g("click",function(){f(e),r();let o=l(6),c=r();return x(c.changeCurrentQuestionIndex(o-1))}),d(1,"nz-icon",14),C(2," \u041F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0438\u0439 \u0432\u043E\u043F\u0440\u043E\u0441 "),u(),s(3,"button",16),g("click",function(){f(e),r();let o=l(6),c=r();return x(c.changeCurrentQuestionIndex(o+1))}),C(4," \u0421\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439 \u0432\u043E\u043F\u0440\u043E\u0441 "),d(5,"nz-icon",15),u()}if(t&2){r();let e=l(6);r();let i=l(1);m("disabled",e===i[0].index),a(3),m("disabled",e===i[i.length-1].index)}}function et(t,n){t&1&&d(0,"div",18)}function tt(t,n){if(t&1){let e=z();h(0),S(1,"isHaveAnswer"),s(2,"button",17),g("click",function(){let o=f(e).$implicit,c=r(2);return x(c.changeCurrentQuestionIndex(o.index))}),C(3),p(4,et,1,0,"div",18),u()}if(t&2){let e=n.$implicit;r();let i=l(7),o=e.id===(i==null?null:i.id),c=o?!1:ie(1,4,e.id,r().userAnswers());a(2),m("nzType",o?"primary":"default")("disabled",o),a(),y(" ",e.index+1," "),a(),_(c?4:-1)}}function nt(t,n){if(t&1){let e=z();s(0,"h1",2),C(1),u(),s(2,"h2",3),C(3),u(),s(4,"div",4,0),h(6)(7),s(8,"div",5)(9,"div",6),p(10,Xe,3,2),u(),s(11,"div",7),p(12,Ye,4,4)(13,Ze,6,2),u(),s(14,"button",8),g("click",function(){f(e);let o=r(),c=l(1);return x(o.completeQuiz(c))}),C(15," \u0421\u0434\u0430\u0442\u044C \u0442\u0435\u0441\u0442 "),u()(),s(16,"div",9)(17,"h3"),C(18,"\u041D\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u044F \u043F\u043E \u0442\u0435\u0441\u0442\u0443"),u(),s(19,"div",10),q(20,tt,5,7,"button",11,Je),u()()()}if(t&2){let e=r(),i=l(0),o=l(1),c=l(2);a(),y("\u0422\u0435\u0441\u0442: ",i==null?null:i.label),a(2),y("\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0432\u043E\u043F\u0440\u043E\u0441\u043E\u0432: ",o.length),a(3),v(e.currentQuestionIndex()),a();let W=v(e.question());a(3),_(W?10:-1),a(2),_(c?12:13),a(2),m("nzBlock",c)("disabled",!W),a(6),w(o)}}function it(t,n){if(t&1){let e=z();s(0,"button",20),g("click",function(){f(e);let o=r(2);return x(o.goToMain())}),C(1,"\u041D\u0430 \u0433\u043B\u0430\u0432\u043D\u0443\u044E"),u()}}function ot(t,n){if(t&1&&(d(0,"nz-empty",19),X(1,it,2,0,"ng-template",null,1,oe)),t&2){let e=ee(2);m("nzNotFoundFooter",e)}}var G=class t{storeService=b(E);router=b(se);nzModalService=b(be);adaptiveService=b(V);selectedTestOption=this.storeService.selectedTest;testQuestions=this.storeService.testQuestions;userAnswers=this.storeService.testResults;currentQuestionIndex=this.storeService.currentQuestionIndex;isTablet=this.adaptiveService.isTablet;quizContainerElement=ae("quizContainer");question=P(()=>this.testQuestions().find(i=>i.index===this.currentQuestionIndex())??null);changeCurrentQuestionIndex(n){this.storeService.setCurrentQuestionIndex(n),this.scroll()}completeQuiz(n){let e=[];for(let[i,o]of this.userAnswers())o.answers.length>0&&e.push(i);this.nzModalService.confirm({nzTitle:"\u0412\u044B \u0445\u043E\u0442\u0438\u0442\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C \u0442\u0435\u0441\u0442?",nzContent:`\u0412\u044B \u043E\u0442\u0432\u0435\u0442\u0438\u043B\u0438 \u043D\u0430 ${e.length} \u0438\u0437 ${n.length} \u0432\u043E\u043F\u0440\u043E\u0441\u043E\u0432`,nzCancelText:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C",nzOkText:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C \u0442\u0435\u0441\u0442",nzMaskClosable:!0,nzOnOk:()=>{this.router.navigateByUrl(`/${U.result}`)}})}goToMain(){this.router.navigateByUrl(`/${U.start}`)}scroll(){let n=this.quizContainerElement()??null;T(n)&&n.nativeElement.scrollTo({top:0,left:0,behavior:"smooth"})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Q({type:t,selectors:[["app-quiz-page"]],viewQuery:function(e,i){e&1&&Y(i.quizContainerElement,Ke,5),e&2&&Z()},decls:5,vars:4,consts:[["quizContainer",""],["footerTpl",""],[1,"quiz-title"],[1,"quiz-subtitle"],[1,"quiz-container"],[1,"quiz-container-left"],[1,"quiz-question"],[1,"quiz-navigation"],["nz-button","","nzType","primary","type","button",3,"click","nzBlock","disabled"],[1,"quiz-container-right"],[1,"quiz-fast-navigation"],["nz-button","","type","button",1,"quiz-fast-navigation-question",3,"nzType","disabled"],[1,"quiz-question-title"],[3,"questionId"],["nzType","left"],["nzType","right"],["nz-button","","nzType","primary","type","button",3,"click","disabled"],["nz-button","","type","button",1,"quiz-fast-navigation-question",3,"click","nzType","disabled"],[1,"quiz-fast-navigation-question-badge"],[1,"quiz-empty",3,"nzNotFoundFooter"],["nz-button","","nzType","primary","type","button",3,"click"]],template:function(e,i){if(e&1&&(h(0)(1)(2),p(3,nt,22,8)(4,ot,3,1)),e&2){let o=v(i.selectedTestOption());a();let c=v(i.testQuestions());a(),v(i.isTablet()),a(),_(o&&c.length>0?3:4)}},dependencies:[F,O,A,I,B,D,N,L,ye,$,H],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:0;height:100%;width:100%}.quiz-title[_ngcontent-%COMP%]{line-height:2rem}.quiz-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:2rem;height:0;flex:1;overflow-y:auto}.quiz-container-left[_ngcontent-%COMP%], .quiz-container-right[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0}.quiz-container-left[_ngcontent-%COMP%]{flex:1;gap:1rem}.quiz-container-left[_ngcontent-%COMP%]   .quiz-navigation[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:1rem}.quiz-container-right[_ngcontent-%COMP%]{--fast-navigation-columns: 7;--fast-navigation-column-width: 35px;overflow-y:auto;width:calc(var(--fast-navigation-columns) * var(--fast-navigation-column-width) + (var(--fast-navigation-columns) - 1) * .5rem + 18.68px)}.quiz-container-right[_ngcontent-%COMP%]   .quiz-fast-navigation[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(var(--fast-navigation-column-width),1fr));gap:.5rem;width:100%;overflow:auto;padding-top:.75rem}.quiz-container-right[_ngcontent-%COMP%]   .quiz-fast-navigation-question[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;width:var(--fast-navigation-column-width);align-items:center;justify-content:center;position:relative}.quiz-container-right[_ngcontent-%COMP%]   .quiz-fast-navigation-question-badge[_ngcontent-%COMP%]{height:10px;width:10px;position:absolute;z-index:2;top:-5px;right:-5px;background-color:#87d068;border-radius:100%}.quiz-empty[_ngcontent-%COMP%]{margin:auto}@media screen and (max-width:1200px){.quiz-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.quiz-container-left[_ngcontent-%COMP%]{flex:none}.quiz-container-right[_ngcontent-%COMP%]{width:100%;min-height:fit-content}}@media screen and (max-width:700px){.quiz-title[_ngcontent-%COMP%], .quiz-subtitle[_ngcontent-%COMP%], .quiz-question-title[_ngcontent-%COMP%]{line-height:1.5rem;margin-bottom:8px}.quiz-title[_ngcontent-%COMP%]{font-size:1.5rem}}"],changeDetection:0})};export{G as default};
