import{a as _e,b as Ce,c as fe,d as ge,e as xe,f as ze,g as ve,h as he,j as qe,k as ye}from"./chunk-OVAWJLYF.js";import{e as ce,f as de,h as me,j as pe,n as k,o as A,p as I,q as N,r as D,t as L}from"./chunk-SE3SSWFJ.js";import"./chunk-UKNCEKZS.js";import{ga as O,ha as F}from"./chunk-4GPCWIHI.js";import"./chunk-KWWH4TJM.js";import"./chunk-FFZQKTQZ.js";import{a as H,b as le,c as h}from"./chunk-ELLHWB53.js";import{b as S}from"./chunk-ENH7K65G.js";import{r as ue}from"./chunk-M7DANYAE.js";import{Ac as re,Fb as m,Ha as K,Ja as J,Lb as p,Mc as V,Nc as se,Ob as w,Oc as ae,Pb as T,Qb as s,Rb as a,Sb as d,Wb as z,a as G,ac as x,b as W,cc as u,gb as r,jc as Y,kc as Z,la as b,lc as ee,mc as c,nc as te,ob as X,oc as v,qc as q,rc as y,sb as M,sc as _,uc as ne,va as f,vb as Q,wa as g,xc as E,yb as C,yc as ie,zc as oe}from"./chunk-N3CWOUBP.js";var R=class n{transform(t){return t==null?!0:Array.isArray(t)?t.length===0:!1}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=Q({name:"isDisabled",type:n,pure:!0})};var be=(n,t)=>t.id;function Ve(n,t){n&1&&d(0,"nz-empty")}function Se(n,t){n&1&&d(0,"nz-icon",9)}function Oe(n,t){n&1&&d(0,"nz-icon",10)}function Fe(n,t){if(n&1&&(s(0,"label",8),c(1),C(2,Se,1,0,"nz-icon",9)(3,Oe,1,0,"nz-icon",10),a()),n&2){let e=t.$implicit,i=u(4);m("nzValue",e.id),r(),v(" ",e.value," "),r(),p(i.isAnswerVisible()&&e.isCorrect?2:-1),r(),p(i.isAnswerVisible()&&!e.isCorrect?3:-1)}}function ke(n,t){if(n&1&&(s(0,"nz-checkbox-group",7),w(1,Fe,4,4,"label",8,be),a()),n&2){let e=u(3),i=_(0);m("formControl",e.questionFormControl),r(),T(i.answers)}}function Ae(n,t){n&1&&d(0,"nz-icon",9)}function Ie(n,t){n&1&&d(0,"nz-icon",10)}function Ne(n,t){if(n&1&&(s(0,"label",11),c(1),C(2,Ae,1,0,"nz-icon",9)(3,Ie,1,0,"nz-icon",10),a()),n&2){let e=t.$implicit,i=u(4);m("nzValue",e.id),r(),v(" ",e.value," "),r(),p(i.isAnswerVisible()&&e.isCorrect?2:-1),r(),p(i.isAnswerVisible()&&!e.isCorrect?3:-1)}}function De(n,t){if(n&1&&(s(0,"nz-radio-group",7),w(1,Ne,4,4,"label",11,be),a()),n&2){let e=u(3),i=_(0);m("formControl",e.questionFormControl),r(),T(i.answers)}}function Le(n,t){if(n&1&&(s(0,"div",5),c(1),a(),d(2,"nz-divider",6),C(3,ke,3,1,"nz-checkbox-group",7)(4,De,3,1,"nz-radio-group",7)),n&2){u(2);let e=_(0);r(),te(e.question),r(2),p(e.isMultiple?3:4)}}function Re(n,t){if(n&1){let e=z();s(0,"button",12),x("click",function(){f(e);let o=u(2);return g(o.changeAnswerVisibility())}),d(1,"nz-icon",13),c(2," \u0421\u043A\u0440\u044B\u0442\u044C \u043E\u0442\u0432\u0435\u0442\u044B "),a()}}function Be(n,t){if(n&1){let e=z();s(0,"button",12),x("click",function(){f(e);let o=u(2);return g(o.changeAnswerVisibility())}),d(1,"nz-icon",14),c(2," \u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u043E\u0442\u0432\u0435\u0442\u044B "),a()}}function $e(n,t){if(n&1){let e=z();s(0,"div",0),C(1,Ve,1,0,"nz-empty")(2,Le,5,2),a(),s(3,"div",1),q(4),E(5,"isDisabled"),s(6,"button",2),x("click",function(){f(e);let o=u();return g(o.clearAnswers())}),d(7,"nz-icon",3),c(8," \u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u043E\u0442\u0432\u0435\u0442\u044B "),a(),C(9,Re,3,0,"button",4)(10,Be,3,0,"button",4),a()}if(n&2){let e=u(),i=_(0);r(),p(i.question.length===0?1:2);let o=ie(5,3,e.questionFormControl.value);r(5),m("disabled",o),r(3),p(e.isAnswerVisible()?9:10)}}var B=class n{storeService=b(S);questionId=K.required();selectedTestOption=h(this.storeService.selectedTest$,{initialValue:null});testQuestions=h(this.storeService.testQuestions$,{initialValue:null});userAnswers=h(this.storeService.testResults$,{initialValue:new Map});isAnswerVisible=J(!1);question=V(()=>{let t=this.questionId();return(this.testQuestions()??[]).find(o=>o.id===t)??null});questionFormControl=new de(null);constructor(){se(()=>{let t=this.question();t!==null&&this.addInitFormControlValue(t)}),this.questionFormControl.valueChanges.pipe(le()).subscribe(()=>{this.addAnswerToStore()})}changeAnswerVisibility(){this.isAnswerVisible.set(!this.isAnswerVisible())}clearAnswers(){this.questionFormControl.setValue(null)}addInitFormControlValue(t){let e=this.userAnswers().get(t.id)??null;if(e===null)this.questionFormControl.setValue(null);else{let i=e.answers;i.length===0?this.questionFormControl.setValue(null):this.questionFormControl.setValue(t.isMultiple?i:i[0])}}addAnswerToStore(){let t=this.questionFormControl.getRawValue()??[],e=Array.isArray(t)?t:[t],i=this.question();if(i!==null){let o={questionId:i.id,userAnswers:i.answers.map(l=>W(G({},l),{userChoice:e.includes(l.id)})),answers:e,testName:this.selectedTestOption()?.label??"",testQuestions:this.testQuestions()??[],selectedTest:this.selectedTestOption()};this.storeService.setTestResult(o)}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-question"]],inputs:{questionId:[1,"questionId"]},decls:2,vars:2,consts:[[1,"question"],[1,"actions"],["nz-button","","nzType","primary","type","button",3,"click","disabled"],["nzType","clear","nzTheme","outline"],["nz-button","","nzType","primary","type","button"],[1,"question-title"],[1,"question-divider"],[1,"question-answers",3,"formControl"],["nz-checkbox","",1,"question-answers-answer",3,"nzValue"],["nzType","check","nzTheme","outline",1,"question-answers-answer-correct"],["nzType","close","nzTheme","outline",1,"question-answers-answer-incorrect"],["nz-radio","",1,"question-answers-answer",3,"nzValue"],["nz-button","","nzType","primary","type","button",3,"click"],["nzType","eye-invisible","nzTheme","outline"],["nzType","eye","nzTheme","outline"]],template:function(e,i){if(e&1&&(q(0),C(1,$e,11,5)),e&2){let o=y(i.question());r(),p(o?1:-1)}},dependencies:[xe,ge,L,D,N,I,k,A,F,O,pe,ce,me,he,ve,ze,fe,_e,Ce,R],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:1rem}.question[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:.75rem 1.25rem;border:1px solid transparent;border-radius:.25rem;box-sizing:border-box;background-color:#e9f6f8;border-color:#bee5eb}.question-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.5rem;line-height:1.5rem}.question-divider[_ngcontent-%COMP%]{margin:0}.question-answers[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.question-answers-answer[_ngcontent-%COMP%]{font-size:1.25rem}.question-answers-answer-correct[_ngcontent-%COMP%]{color:#28a745;margin-left:.5rem}.question-answers-answer-incorrect[_ngcontent-%COMP%]{color:#ff5a5f;margin-left:.5rem}.actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:1rem}@media screen and (max-width: 700px){.question[_ngcontent-%COMP%]{gap:.5rem}.question-title[_ngcontent-%COMP%], .question-answers-answer[_ngcontent-%COMP%]{font-size:1rem;line-height:1rem}}"],changeDetection:0})};var $=class n{transform(t,e){return e.has(t)?e.get(t).answers.length>0:!1}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=Q({name:"isHaveAnswer",type:n,pure:!1})};var He=["quizContainer"],Ue=()=>[],je=(n,t)=>t.id;function Ge(n,t){if(n&1&&(s(0,"h2",14),c(1),a(),d(2,"app-question",15)),n&2){u();let e=_(7);r(),v("\u0412\u043E\u043F\u0440\u043E\u0441 \u2116",e.id,""),r(),m("questionId",e.id)}}function We(n,t){n&1&&d(0,"div",17)}function Ke(n,t){if(n&1){let e=z();q(0)(1),E(2,"isHaveAnswer"),s(3,"button",16),x("click",function(){let o=f(e).$implicit,l=u(2);return g(l.changeCurrentQuestionIndex(o.id))}),c(4),C(5,We,1,0,"div",17),a()}if(n&2){let e=t.$implicit;u();let i=_(7),o=e.id===(i==null?null:i.id),l=o?!1:oe(2,4,e.id,u().userAnswers());r(3),m("nzType",o?"primary":"default")("disabled",o),r(),v(" ",e.id," "),r(),p(l?5:-1)}}function Je(n,t){if(n&1){let e=z();s(0,"h1",2),c(1),a(),s(2,"h2",3),c(3),a(),s(4,"div",4,0),q(6)(7),s(8,"div",5)(9,"div",6),C(10,Ge,3,2),a(),s(11,"div",7)(12,"button",8),x("click",function(){f(e);let o=_(6),l=u();return g(l.changeCurrentQuestionIndex(o-1))}),d(13,"nz-icon",9),c(14," \u041F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0438\u0439 \u0432\u043E\u043F\u0440\u043E\u0441 "),a(),s(15,"button",8),x("click",function(){f(e);let o=_(6),l=u();return g(l.changeCurrentQuestionIndex(o+1))}),c(16," \u0421\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439 \u0432\u043E\u043F\u0440\u043E\u0441 "),d(17,"nz-icon",10),a()(),s(18,"button",8),x("click",function(){f(e);let o=u(),l=_(1);return g(o.completeQuiz(l))}),c(19," \u0421\u0434\u0430\u0442\u044C \u0442\u0435\u0441\u0442 "),a()(),s(20,"div",11)(21,"h3"),c(22,"\u041D\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u044F \u043F\u043E \u0442\u0435\u0441\u0442\u0443"),a(),s(23,"div",12),w(24,Ke,6,7,"button",13,je),a()()()}if(n&2){let e=u(),i=_(0),o=_(1);r(),v("\u0422\u0435\u0441\u0442: ",i==null?null:i.label,""),r(2),v("\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0432\u043E\u043F\u0440\u043E\u0441\u043E\u0432: ",o.length,""),r(3);let l=y(e.currentQuestionIndex());r();let P=y(e.question());r(3),p(P?10:-1),r(2),m("disabled",l===o[0].id),r(3),m("disabled",l===o[o.length-1].id),r(3),m("disabled",!P),r(6),T(o)}}function Xe(n,t){if(n&1){let e=z();s(0,"button",19),x("click",function(){f(e);let o=u(2);return g(o.goToMain())}),c(1,"\u041D\u0430 \u0433\u043B\u0430\u0432\u043D\u0443\u044E"),a()}}function Ye(n,t){if(n&1&&(d(0,"nz-empty",18),C(1,Xe,2,0,"ng-template",null,1,re)),n&2){let e=ee(2);m("nzNotFoundFooter",e)}}var j=class n{storeService=b(S);router=b(ue);nzModalService=b(qe);selectedTestOption=h(this.storeService.selectedTest$,{initialValue:null});testQuestions=h(this.storeService.testQuestions$,{initialValue:null});userAnswers=h(this.storeService.testResults$,{initialValue:new Map});currentQuestionIndex=ae(()=>{let t=this.testQuestions();return t!==null?t[0].id:0});quizContainerElement=X("quizContainer");question=V(()=>(this.testQuestions()??[]).find(i=>i.id===this.currentQuestionIndex())??null);changeCurrentQuestionIndex(t){this.currentQuestionIndex.set(t),this.scroll()}completeQuiz(t){let e=[];for(let[i,o]of this.userAnswers())o.answers.length>0&&e.push(i);this.nzModalService.confirm({nzTitle:"\u0412\u044B \u0445\u043E\u0442\u0438\u0442\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C \u0442\u0435\u0441\u0442?",nzContent:`\u0412\u044B \u043E\u0442\u0432\u0435\u0442\u0438\u043B\u0438 \u043D\u0430 ${e.length} \u0438\u0437 ${t.length} \u0432\u043E\u043F\u0440\u043E\u0441\u043E\u0432`,nzCancelText:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C",nzOkText:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C \u0442\u0435\u0441\u0442",nzMaskClosable:!0,nzOnOk:()=>{this.router.navigateByUrl(`/${H.result}`),this.storeService.setSelectedTest(null)}})}goToMain(){this.router.navigateByUrl(`/${H.start}`)}scroll(){let t=this.quizContainerElement()??null;t!==null&&t.nativeElement.scrollTo({top:0,left:0,behavior:"smooth"})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-quiz-page"]],viewQuery:function(e,i){e&1&&Y(i.quizContainerElement,He,5),e&2&&Z()},decls:4,vars:4,consts:[["quizContainer",""],["footerTpl",""],[1,"quiz-title"],[1,"quiz-subtitle"],[1,"quiz-container"],[1,"quiz-container-left"],[1,"quiz-question"],[1,"quiz-navigation"],["nz-button","","nzType","primary","type","button",3,"click","disabled"],["nzType","left"],["nzType","right"],[1,"quiz-container-right"],[1,"quiz-fast-navigation"],["nz-button","","type","button",1,"quiz-fast-navigation-question",3,"nzType","disabled"],[1,"quiz-question-title"],[3,"questionId"],["nz-button","","type","button",1,"quiz-fast-navigation-question",3,"click","nzType","disabled"],[1,"quiz-fast-navigation-question-badge"],[1,"quiz-empty",3,"nzNotFoundFooter"],["nz-button","","nzType","primary","type","button",3,"click"]],template:function(e,i){if(e&1&&(q(0)(1),C(2,Je,26,8)(3,Ye,3,1)),e&2){let o,l=y(i.selectedTestOption());r();let P=y((o=i.testQuestions())!==null&&o!==void 0?o:ne(3,Ue));r(),p(l&&P.length>0?2:3)}},dependencies:[N,I,k,A,L,D,F,O,ye,$,B],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:0;height:100%;width:100%}.quiz-title[_ngcontent-%COMP%]{line-height:2rem}.quiz-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:2rem;height:0;flex:1;overflow-y:auto}.quiz-container-left[_ngcontent-%COMP%], .quiz-container-right[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0}.quiz-container-left[_ngcontent-%COMP%]{flex:1;gap:1rem}.quiz-container-left[_ngcontent-%COMP%]   .quiz-navigation[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:1rem}.quiz-container-right[_ngcontent-%COMP%]{--fast-navigation-columns: 7;--fast-navigation-column-width: 35px;overflow-y:auto;width:calc(var(--fast-navigation-columns) * var(--fast-navigation-column-width) + (var(--fast-navigation-columns) - 1) * .5rem + 18.68px)}.quiz-container-right[_ngcontent-%COMP%]   .quiz-fast-navigation[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(var(--fast-navigation-column-width),1fr));gap:.5rem;width:100%}.quiz-container-right[_ngcontent-%COMP%]   .quiz-fast-navigation-question[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;width:var(--fast-navigation-column-width);align-items:center;justify-content:center;position:relative}.quiz-container-right[_ngcontent-%COMP%]   .quiz-fast-navigation-question-badge[_ngcontent-%COMP%]{height:10px;width:10px;position:absolute;z-index:2;top:-5px;right:-5px;background-color:#87d068;border-radius:100%}.quiz-empty[_ngcontent-%COMP%]{margin:auto}@media screen and (max-width: 1200px){.quiz-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.quiz-container-left[_ngcontent-%COMP%]{flex:none}.quiz-container-right[_ngcontent-%COMP%]{width:100%;min-height:fit-content}}@media screen and (max-width: 700px){.quiz-title[_ngcontent-%COMP%], .quiz-subtitle[_ngcontent-%COMP%], .quiz-question-title[_ngcontent-%COMP%]{line-height:1.5rem;margin-bottom:8px}.quiz-title[_ngcontent-%COMP%]{font-size:1.5rem}}@media screen and (max-width: 500px){.quiz-navigation[_ngcontent-%COMP%]   .ant-btn[_ngcontent-%COMP%]  span{display:none}.quiz-navigation[_ngcontent-%COMP%]   .ant-btn[_ngcontent-%COMP%]  .anticon{margin:0}}"],changeDetection:0})};export{j as default};
