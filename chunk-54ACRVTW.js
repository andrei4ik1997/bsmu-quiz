import{b as ee,c as te}from"./chunk-4RKD22ZB.js";import{a as b}from"./chunk-TNWMNFDH.js";import"./chunk-ZWEBBLBN.js";import{a as R,b as B,d as A}from"./chunk-MSSXIR4M.js";import{d as W,e as G,f as J,g as X,h as Y,j as Z}from"./chunk-BAWH47OO.js";import{a as U,b as P}from"./chunk-SZYELMMS.js";import"./chunk-XTMMDLFS.js";import{a as H}from"./chunk-5EVNWBFJ.js";import{Z as j,_ as K}from"./chunk-4I6IVQI2.js";import"./chunk-NAH5QJVK.js";import"./chunk-7QSQE4VK.js";import"./chunk-6IKGMKHR.js";import{Ab as x,C as Q,Fa as E,Fc as $,Gb as C,Jb as I,Kb as k,Lb as s,Mb as l,Nb as g,Rb as z,Xb as f,Zb as a,cb as r,ec as F,fc as c,ha as q,hc as v,jc as y,kc as h,lc as d,nb as O,nc as L,qb as S,qc as N,ra as p,sa as m,sc as V,tb as _,tc as D}from"./chunk-ZO5JOBJ4.js";import"./chunk-4CLCTAJ7.js";var w=class t{transform(n,e){return e.has(n)?e.get(n).answers.length>0:!1}static \u0275fac=function(e){return new(e||t)};static \u0275pipe=S({name:"isHaveAnswer",type:t,pure:!1})};var ie=()=>[],oe=(t,n)=>n.id;function re(t,n){if(t&1&&(s(0,"h2",11),c(1),l(),g(2,"router-outlet")),t&2){a();let e=d(6);r(),v("\u0412\u043E\u043F\u0440\u043E\u0441 \u2116",e.id,"")}}function ae(t,n){if(t&1){let e=z();s(0,"div",6)(1,"button",12),f("click",function(){p(e),a();let i=d(5),u=a();return m(u.changeCurrentQuestionIndex(i-1))}),g(2,"nz-icon",13),c(3," \u041F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0438\u0439 \u0432\u043E\u043F\u0440\u043E\u0441 "),l(),s(4,"button",12),f("click",function(){p(e),a();let i=d(5),u=a();return m(u.changeCurrentQuestionIndex(i+1))}),c(5," \u0421\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439 \u0432\u043E\u043F\u0440\u043E\u0441 "),g(6,"nz-icon",14),l()()}if(t&2){a();let e=d(5);a();let o=d(1);r(),x("disabled",e===1),r(3),x("disabled",e===o[o.length-1].id)}}function ue(t,n){t&1&&g(0,"div",16)}function se(t,n){if(t&1){let e=z();y(0)(1),N(2,"isHaveAnswer"),s(3,"button",15),f("click",function(){let i=p(e).$implicit,u=a(2);return m(u.changeCurrentQuestionIndex(i.id))}),c(4),_(5,ue,1,0,"div",16),l()}if(t&2){let e=n.$implicit;a();let o=d(6),i=e.id===(o==null?null:o.id),u=i?!1:V(2,4,e.id,a().userAnswers());r(3),x("nzType",i?"primary":"default")("disabled",i),r(),v(" ",e.id," "),r(),C(u?5:-1)}}function le(t,n){if(t&1){let e=z();s(0,"h1",1),c(1),l(),s(2,"h2",2),c(3),l(),s(4,"div",3),y(5)(6),s(7,"div",4)(8,"div",5),_(9,re,3,1),l(),_(10,ae,7,2,"div",6),s(11,"button",7),f("click",function(){p(e);let i=a(),u=d(1);return m(i.completeQuiz(u))}),c(12,"\u0421\u0434\u0430\u0442\u044C \u0442\u0435\u0441\u0442"),l()(),s(13,"div",8)(14,"h3"),c(15,"\u041D\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u044F \u043F\u043E \u0442\u0435\u0441\u0442\u0443"),l(),s(16,"div",9),I(17,se,6,7,"button",10,oe),l()()()}if(t&2){let e=a(),o=d(0),i=d(1);r(),v("\u0422\u0435\u0441\u0442: ",o==null?null:o.title,""),r(2),v("\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0432\u043E\u043F\u0440\u043E\u0441\u043E\u0432: ",i.length,""),r(2);let u=h(e.currentQuestionIndex());r();let T=h(e.question());r(3),C(T?9:-1),r(),C(u!==null?10:-1),r(7),k(i)}}function ce(t,n){if(t&1){let e=z();s(0,"button",7),f("click",function(){p(e);let i=a(2);return m(i.goToMain())}),c(1,"\u041D\u0430 \u0433\u043B\u0430\u0432\u043D\u0443\u044E"),l()}}function de(t,n){if(t&1&&(g(0,"nz-empty",17),_(1,ce,2,0,"ng-template",null,0,D)),t&2){let e=F(2);x("nzNotFoundFooter",e)}}var M=class t{storeService=q(H);router=q(A);nzModalService=q(ee);selectedTestOption=P(this.storeService.selectedTest$,{initialValue:null});testQuestions=P(this.storeService.testQuestions$,{initialValue:null});userAnswers=P(this.storeService.testResults$,{initialValue:new Map});currentQuestionIndex=E(null);question=$(()=>(this.testQuestions()??[]).find(o=>o.id===this.currentQuestionIndex())??null);constructor(){this.router.events.pipe(Q(n=>n instanceof R),U()).subscribe(n=>{let[,,e]=n.url.split("/");this.currentQuestionIndex.set(Number(e))})}changeCurrentQuestionIndex(n){this.router.navigateByUrl(`/${b.quiz}/${n}`)}completeQuiz(n){let e=[];for(let[o,i]of this.userAnswers())i.answers.length>0&&e.push(o);this.nzModalService.confirm({nzTitle:"\u0412\u044B \u0445\u043E\u0442\u0438\u0442\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C \u0442\u0435\u0441\u0442?",nzContent:`\u0412\u044B \u043E\u0442\u0432\u0435\u0442\u0438\u043B\u0438 \u043D\u0430 ${e.length} \u0438\u0437 ${n.length} \u0432\u043E\u043F\u0440\u043E\u0441\u043E\u0432`,nzCancelText:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C",nzOkText:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C \u0442\u0435\u0441\u0442",nzMaskClosable:!0,nzOnOk:()=>{this.router.navigateByUrl(`/${b.result}`),this.storeService.setSelectedTest(null)}})}goToMain(){this.router.navigateByUrl(`/${b.start}`)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=O({type:t,selectors:[["app-quiz-page"]],decls:4,vars:4,consts:[["footerTpl",""],[1,"quiz-title"],[1,"quiz-subtitle"],[1,"quiz-container"],[1,"quiz-container-left"],[1,"quiz-question"],[1,"quiz-navigation"],["nz-button","","nzType","primary","type","button",3,"click"],[1,"quiz-container-right"],[1,"quiz-fast-navigation"],["nz-button","","type","button",1,"quiz-fast-navigation-question",3,"nzType","disabled"],[1,"quiz-question-title"],["nz-button","","nzType","primary","type","button",3,"click","disabled"],["nzType","left"],["nzType","right"],["nz-button","","type","button",1,"quiz-fast-navigation-question",3,"click","nzType","disabled"],[1,"quiz-fast-navigation-question-badge"],[1,"quiz-empty",3,"nzNotFoundFooter"]],template:function(e,o){if(e&1&&(y(0)(1),_(2,le,19,6)(3,de,3,1)),e&2){let i,u=h(o.selectedTestOption());r();let T=h((i=o.testQuestions())!==null&&i!==void 0?i:L(3,ie));r(),C(u&&T.length>0?2:3)}},dependencies:[X,J,W,G,Z,Y,K,j,te,B,w],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:0;height:100%;width:100%}.quiz-title[_ngcontent-%COMP%]{line-height:2rem}.quiz-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:2rem;height:0;flex:1;overflow-y:auto}.quiz-container-left[_ngcontent-%COMP%], .quiz-container-right[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0}.quiz-container-left[_ngcontent-%COMP%]{flex:1;gap:1rem}.quiz-container-left[_ngcontent-%COMP%]   .quiz-navigation[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:1rem}.quiz-container-right[_ngcontent-%COMP%]{--fast-navigation-columns: 7;--fast-navigation-column-width: 35px;overflow-y:auto;width:calc(var(--fast-navigation-columns) * var(--fast-navigation-column-width) + (var(--fast-navigation-columns) - 1) * .5rem + 18.68px)}.quiz-container-right[_ngcontent-%COMP%]   .quiz-fast-navigation[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(var(--fast-navigation-column-width),1fr));gap:.5rem;width:100%}.quiz-container-right[_ngcontent-%COMP%]   .quiz-fast-navigation-question[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;width:var(--fast-navigation-column-width);align-items:center;justify-content:center;position:relative}.quiz-container-right[_ngcontent-%COMP%]   .quiz-fast-navigation-question-badge[_ngcontent-%COMP%]{height:10px;width:10px;position:absolute;z-index:2;top:-5px;right:-5px;background-color:#87d068;border-radius:100%}.quiz-empty[_ngcontent-%COMP%]{margin:auto}@media screen and (max-width: 1200px){.quiz-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.quiz-container-left[_ngcontent-%COMP%]{flex:none}.quiz-container-right[_ngcontent-%COMP%]{width:100%;min-height:fit-content}}@media screen and (max-width: 500px){.quiz-navigation[_ngcontent-%COMP%]   .ant-btn[_ngcontent-%COMP%]  span{display:none}.quiz-navigation[_ngcontent-%COMP%]   .ant-btn[_ngcontent-%COMP%]  .anticon{margin:0}}"],changeDetection:0})};export{M as default};
