import{Da as s,La as a,Pc as m,aa as y,ea as u,g as v,na as i,ua as c}from"./chunk-DN3W4AF5.js";function g(r){r||(c(g),r=i(s));let e=new v(t=>r.onDestroy(t.next.bind(t)));return t=>t.pipe(y(e))}function p(r,e){let t=!e?.manualCleanup;t&&!e?.injector&&c(p);let d=t?e?.injector?.get(s)??i(s):null,l=h(e?.equal),o;e?.requireSync?o=a({kind:0},{equal:l}):o=a({kind:1,value:e?.initialValue},{equal:l});let b,f=r.subscribe({next:n=>o.set({kind:1,value:n}),error:n=>{if(e?.rejectErrors)throw n;o.set({kind:2,error:n})},complete:()=>{b?.()}});if(e?.requireSync&&o().kind===0)throw new u(601,!1);return b=d?.onDestroy(f.unsubscribe.bind(f)),m(()=>{let n=o();switch(n.kind){case 1:return n.value;case 2:throw n.error;case 0:throw new u(601,!1)}},{equal:e?.equal})}function h(r=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&r(e.value,t.value)}export{g as a,p as b};
